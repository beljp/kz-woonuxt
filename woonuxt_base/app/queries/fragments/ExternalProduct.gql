query getProduct($slug: ID!) {
  product(id: $slug, idType: SLUG) {
    name
    type
    databaseId
    id
    metaData {
      id
      key
      value
    }
    slug
    sku
    description
    rawDescription: description(format: RAW)
    shortDescription

    # ðŸ”¹ Product details & taxonomieÃ«n
    ...ProductWithAttributes
    ...ProductCategories
    ...Terms

    # ðŸ”¹ Product types (Simple, Variable, External)
    ...SimpleProduct
    ...VariableProduct
    ...ExternalProduct

    # ðŸ”¹ Gerelateerde producten
    related(first: 5) {
      nodes {
        ...SimpleProduct
        ...VariableProduct
        ...ExternalProduct
      }
    }

    # ðŸ”¹ Reviews
    reviews {
      averageRating
      edges {
        rating
        node {
          ...Comment
        }
      }
    }
  }
}

# âœ… Product attributen (kleur, maat, etc.)
fragment ProductWithAttributes on ProductWithAttributes {
  attributes {
    nodes {
      ...ProductAttribute
    }
  }
}

fragment ProductAttribute on ProductAttribute {
  variation
  name
  id
  options
  label
  scope
  ... on GlobalProductAttribute {
    terms(where: { orderby: MENU_ORDER, order: ASC }) {
      nodes {
        name
        slug
        taxonomyName
        databaseId
      }
    }
  }
}

# âœ… Nieuw / uitgebreid ExternalProduct fragment
fragment ExternalProduct on ExternalProduct {
  id
  databaseId
  name
  slug
  type
  sku
  price
  regularPrice
  salePrice
  onSale            # ðŸŸ¢ toegevoegd: zorgt dat sale-filter ook werkt voor External producten
  externalUrl
  image {
    id
    sourceUrl
    altText
    mediaDetails {
      width
      height
    }
  }
}
